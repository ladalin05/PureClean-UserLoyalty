import{_ as G}from"./B_zEcWSW.js";import{i as L,u as S,j as c,d as R,k as Y,s as q,l as D,m as H,n as B,w as r,r as s,o as y,h as a,c as J,b as o,g as K,t as i,f as d,O as Q,_ as W}from"./UQl896Zx.js";const X=L("user",()=>{const{$AdminPrivateAxios:x}=S();c([]),c(null);const F=c(null);return{user:F,fetchUser:async(m={})=>{const t=(await x.get("/users",{params:m}))?.data?.data||{};F.value=t||""},updateUser:async m=>{const p=await x.put("/users",m);return F.value=p.data.data,p}}}),Z={key:0,class:"flex justify-center items-center h-[80vh]"},ee={class:"d-flex justify-between mb-12 py-1 align-center"},te={class:"font-medium text-[20px] leading-[30px] tracking-normal dark:text-[#FFFFFF]"},oe={class:"text-center mb-8 w-full text-[#323232]"},ae={class:"position-relative d-inline-block rounded-full border-2 border-[#35667D]"},le={class:"mt-3 text-h6 font-medium capitalize"},se={class:"mb-5"},ne={class:"text-sm mb-2 d-block text-[#7F7F7F] dark:text-[#FFFFFF]"},re={class:"mb-5"},de={class:"text-sm mb-2 d-block text-[#7F7F7F] dark:text-[#FFFFFF]"},ue={class:"mb-5"},ie={class:"text-sm mb-2 d-block text-[#7F7F7F] dark:text-[#FFFFFF]"},ce={class:"mb-5"},me={class:"text-sm mb-2 d-block text-[#7F7F7F] dark:text-[#FFFFFF]"},pe={class:"absolute bottom-[47px] left-0 w-full px-6"},ve=R({__name:"user-information",setup(x){const n=S().$translate,f=X(),m=Y(),{user:p}=q(m),t=c({}),v=c(!1),h=c(!1),$=[{title:"Male",value:"male"},{title:"Female",value:"female"},{title:"Other",value:"other"}],V=D(()=>p.value||null),w=D(()=>t.value?.dob?new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(new Date(t.value.dob)):"");H(async()=>{try{v.value=!0,await f.fetchUser(),t.value={...f.user}}catch(u){console.error("Failed to fetch user:",u)}finally{v.value=!1}});const A=async()=>{try{v.value=!0;let u=null;if(t.value.dob){const _=new Date(t.value.dob),b=g=>String(g).padStart(2,"0");u=`${_.getFullYear()}-${b(_.getMonth()+1)}-${b(_.getDate())} 00:00:00`}const e={username:t.value.username,gender:t.value.gender,dob:u,phone:t.value.phone};await f.updateUser(e)}catch(u){console.error(u?.response?.data?.message||"Failed to update user")}finally{v.value=!1}};return(u,e)=>{const _=s("v-progress-circular"),b=s("v-icon"),g=G,z=s("v-img"),j=s("v-avatar"),C=s("v-btn"),k=s("v-text-field"),M=s("v-select"),N=s("v-date-picker"),E=s("v-menu"),I=s("v-form"),U=s("v-container"),O=s("v-main"),T=s("v-app");return y(),B(T,null,{default:r(()=>[a(O,{class:"bg-[#FFFFFF] dark:bg-[#191919] font-roboto",style:{color:"#323232 !important"}},{default:r(()=>[v.value?(y(),J("div",Z,[a(_,{indeterminate:"",color:"primary",size:"70"})])):(y(),B(U,{key:1,class:"pa-6 pt-12"},{default:r(()=>[o("header",ee,[a(g,{to:"/profile"},{default:r(()=>[a(b,{size:"28",class:"dark:text-[#FFFFFF]"},{default:r(()=>[...e[8]||(e[8]=[K("mdi-chevron-left",-1)])]),_:1})]),_:1}),o("p",te,i(d(n)("user_informations")),1),e[9]||(e[9]=o("div",{class:"w-[28px]"},null,-1))]),o("div",oe,[o("div",ae,[a(j,{size:"100"},{default:r(()=>[a(z,{src:V.value?.profile_picture,alt:V.value?.username},null,8,["src","alt"])]),_:1}),a(C,{icon:"mdi-pencil",size:"x-small",color:"#35667D",class:"position-absolute",style:{bottom:"1px",right:"2px"}})]),o("h3",le,i(t.value.username),1)]),a(U,{class:"fill-height justify-center"},{default:r(()=>[a(I,{class:"w-full"},{default:r(()=>[o("div",se,[o("label",ne,i(d(n)("username")),1),a(k,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.username=l),variant:"outlined",density:"comfortable",class:"custom-field dark:text-[#FFFFFF]",placeholder:d(n)("input_username"),"hide-details":""},null,8,["modelValue","placeholder"])]),o("div",re,[o("label",de,i(d(n)("gender")),1),a(M,{modelValue:t.value.gender,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.gender=l),items:$,"item-title":"title","item-value":"value",variant:"outlined",density:"comfortable",class:"custom-field dark:text-[#FFFFFF]",placeholder:d(n)("select_gender"),"hide-details":""},null,8,["modelValue","placeholder"])]),o("div",ue,[o("label",ie,i(d(n)("dob")),1),a(E,{modelValue:h.value,"onUpdate:modelValue":e[5]||(e[5]=l=>h.value=l),"close-on-content-click":!1,transition:"scale-transition","min-width":"auto"},{activator:r(({props:l})=>[a(k,Q({modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=P=>w.value=P)},l,{variant:"outlined",density:"comfortable",class:"custom-field dark:text-[#FFFFFF]",placeholder:d(n)("select_dob"),readonly:"","hide-details":""}),null,16,["modelValue","placeholder"])]),default:r(()=>[a(N,{modelValue:t.value.dob,"onUpdate:modelValue":[e[3]||(e[3]=l=>t.value.dob=l),e[4]||(e[4]=l=>h.value=!1)]},null,8,["modelValue"])]),_:1},8,["modelValue"])]),o("div",ce,[o("label",me,i(d(n)("phone")),1),a(k,{modelValue:t.value.phone,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.phone=l),variant:"outlined",density:"comfortable",class:"custom-field dark:text-[#FFFFFF]",placeholder:d(n)("input_phone"),"hide-details":""},null,8,["modelValue","placeholder"])])]),_:1})]),_:1}),o("section",pe,[o("button",{class:"w-full bg-[#3E6B7E] hover:bg-[#325868] text-white py-4 rounded-full text-lg font-medium transition-colors shadow-md",onClick:e[7]||(e[7]=l=>A())},i(d(n)("save")),1)])]),_:1}))]),_:1})]),_:1})}}}),fe=W(ve,[["__scopeId","data-v-93ba68d0"]]);export{fe as default};
